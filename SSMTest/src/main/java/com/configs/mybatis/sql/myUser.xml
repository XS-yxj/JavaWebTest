<?xml version="1.0" encoding="GBK"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.dao.UserDaoInterface">

  <!--配置sql结果集 (未知原因添加中文注解需要改头部encoding)-->
  <resultMap type="com.bean.User" id="UserResult">
    <id column="email" jdbcType="VARCHAR" property="email"/>
    <id column="username" jdbcType="VARCHAR" property="username"/>
    <result column="password" jdbcType="VARCHAR" property="password"/>
    <result column="userImagePath" jdbcType="VARCHAR" property="userImagePath"/>
  </resultMap>
  <!--parameterType只能接受一个参数（封装解决）-->
  <!--OGNL可以直接使用java程序(?maven没有配置也可以)-->
  <!--去空格干扰和注意模糊匹配-->
  <!--可配置log4j用于日志检查-->
  <select id="queryUserList" parameterType="com.bean.User" resultMap="UserResult">
    SELECT email,username,password FROM user
    <where>
      <if test="email != null and !&quot;&quot;.equals(email.trim())">
        and email like '%' #{email} '%'</if>
      <if test="username != null and !&quot;&quot;.equals(username.trim())">
        and username=#{username}</if>
    </where>
  </select>

  <select id="getUser" parameterType="String" resultMap="UserResult">
    SELECT username,password FROM user WHERE username=#{_parameter}
  </select>

  <select id="getUserInfo" parameterType="String" resultMap="UserResult">
    SELECT * FROM user WHERE username=#{_parameter}
  </select>




</mapper>
